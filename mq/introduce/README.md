# 介绍

## 应用场景

服务解耦：消息队列可以用于服务解耦，这是微服务之间的通信手段。看服务之间是强依赖还是弱依赖，强依赖可以使用同步`RPC`或者`HTTP`调用，弱依赖可以选用消息中间件。但弱依赖并不代表消息可以失败，要保证上游服务消息投递的可靠性。

削峰填谷：把流量的高峰削下来，先把消息存到一个队列里，后面慢慢消费。应对线上环境秒杀大促等业务，抗压。

异步化缓冲：有些业务可以异步化处理，达到最终一致性即可，不需要强一致性。

## 应用思考点

生产端可靠性投递：特别是金融业务，要做到生产端`100%`可靠性投递，消息发出去和数据库要保障原子性。

消费端幂等：可能会出现重复消费问题，消费端要做幂等性验证，不能让消息消费多次。

还要考虑`MQ`的高可用、低延迟、可靠性、堆积能力、扩展性等。

## 业界主流的分布式消息队列

- ActiveMQ
- RabbitMQ
- RocketMQ
- Kafka

## 如何进行技术选型?

各个`MQ`的性能、优缺点、相应的业务场景。

集群架构模式：分布式、可扩展、高可用、可维护性。